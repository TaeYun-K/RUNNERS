## 서비스명

## ![alt text](<image (4).png>)

RUNNERS – 누적 km로 성장하는 러닝 커뮤니티
소개 사이트 : https://runners.io.kr/

## 서비스 개요 (MVP)

---

- 목적: 러닝 기록을 **외부 건강/러닝 앱과 연동**해 자동으로 가져오고, 누적 km를 “레벨”처럼 노출 + 커뮤니티에서 공유/소통 + 대시보드로 관리
- 타깃: 러닝을 주로 하며 **기록을 관리하고 자랑**하고 싶은 사용자

## 1) 사용자/권한

---

- USER: 일반 사용자(기록 조회, 게시판 작성/댓글)
- ADMIN(옵션, 최소): 신고 처리/삭제 등 운영 기능(초기엔 스킵 가능)

## 2) 핵심 데이터 정의(초안)

---

- 러닝 기록 1건: `거리(km), 페이스(분/km), 시간(초 or hh:mm:ss), 날짜/시간, 위치(위경도 or 지역명)`
- 집계 지표:
  - 총 누적 km
  - 주간 누적 km(주차 기준)
  - 월간 누적 km
  - 평균 페이스(기간별: 전체/주/월 중 MVP에서 1개로 통일 가능)
  - 연속 러닝일(streak)

## 3) 기능 명세 (MVP)

---

A. 회원/프로필

| 단계 | 화면 / API                          | 사용자 입력·행동            | 시스템 동작                                                   |
| ---- | ----------------------------------- | --------------------------- | ------------------------------------------------------------- |
| A1   | 회원가입 화면 / `POST /auth/signup` | 이메일/비밀번호/닉네임 입력 | 계정 생성, 기본 프로필 생성                                   |
| A2   | 로그인 화면 / `POST /auth/login`    | 로그인                      | 토큰 발급, 세션 유지                                          |
| A3   | 내 프로필 / `GET /me`               | 프로필 조회                 | 닉네임 옆에 **레벨(=누적 km 기반)** 표시, 기본 통계 요약 노출 |
| A4   | 프로필 수정 / `PATCH /me`           | 닉네임 변경(옵션)           | 변경 저장, 중복 닉네임 검증                                   |

**레벨 노출 규칙(초안)**

- 레벨 = 누적 km를 정수로 표현(예: 123.4km → “Lv.123” 또는 “123km”)
- 표시 포맷은 UI에서 통일 (예: `닉네임 · 123km`)

B. 외부 앱 연동 및 동기화 (수동 입력 금지의 핵심)

| 단계 | 화면 / API                                 | 사용자 입력·행동              | 시스템 동작                                                     |
| ---- | ------------------------------------------ | ----------------------------- | --------------------------------------------------------------- |
| B1   | 연동 안내 화면                             | “기록 연동하기” 클릭          | 연동 가능한 소스(Health/러닝 앱)를 안내                         |
| B2   | 권한 요청 / `POST /integrations/connect`   | 외부 데이터 접근 권한 동의    | 권한 토큰/연동 상태 저장, 마지막 동기화 시각 초기화             |
| B3   | 동기화 실행 / `POST /runs/sync`            | “동기화” 버튼 클릭(또는 자동) | 외부 소스에서 러닝 기록 수집 → 중복 제거 후 저장                |
| B4   | 동기화 결과 / `GET /runs/sync/status`      | 결과 확인                     | 새로 추가된 기록 수, 실패 사유, 마지막 동기화 시간 표시         |
| B5   | 연동 해제 / `DELETE /integrations/connect` | 연동 해제                     | 연동 토큰 폐기, 자동 동기화 중단(기존 기록 유지 여부 정책 적용) |

**중요 정책(초안)**

- “수동 입력 금지” → 러닝 기록 생성 API는 **내부에서 직접 생성 불가**, 연동 동기화로만 생성
- 중복 제거 기준(예시): `날짜/시간 + 거리 + 시간` 조합 or 외부 recordId 저장
- 위치는 외부가 제공하는 범위 내에서만 저장(없으면 null)

C. 러닝 기록 조회 (원본 데이터)

| 단계 | 화면 / API                                | 사용자 입력·행동  | 시스템 동작                          |
| ---- | ----------------------------------------- | ----------------- | ------------------------------------ |
| C1   | 러닝 기록 목록 / `GET /runs?from&to&page` | 기간 선택, 스크롤 | 기간별 기록 페이징 조회              |
| C2   | 러닝 기록 상세 / `GET /runs/{runId}`      | 특정 기록 클릭    | 거리/페이스/시간/날짜/위치 상세 표시 |

D. 대시보드 (요구 지표 5종)

| 단계 | 화면 / API                                        | 사용자 입력·행동          | 시스템 동작                                                                    |
| ---- | ------------------------------------------------- | ------------------------- | ------------------------------------------------------------------------------ |
| D1   | 대시보드 메인 / `GET /dashboard/summary`          | 진입                      | **총 누적 / 주간 / 월간 / 평균 페이스 / 연속 러닝일** 계산 후 카드 형태로 제공 |
| D2   | 기간 변경(옵션) / `GET /dashboard/summary?range=` | “최근 7일/30일/올해” 선택 | 평균 페이스·streak 계산 기준을 선택 범위로 변경                                |
| D3   | 그래프(옵션) / `GET /dashboard/weekly`            | 주간 그래프 보기          | 주간 누적 km 추이 제공(막대/선)                                                |
| D4   | 그래프(옵션) / `GET /dashboard/monthly`           | 월간 그래프 보기          | 월간 누적 km 추이 제공                                                         |

**연속 러닝일(streak) 정의(초안)**

- “오늘 포함” 기준으로 연속된 날짜에 러닝 기록이 있으면 카운트
- 하루에 여러 기록이 있어도 1일로 처리

E. 커뮤니티(단일 게시판)

| 단계 | 화면 / API                                  | 사용자 입력·행동     | 시스템 동작                                          |
| ---- | ------------------------------------------- | -------------------- | ---------------------------------------------------- |
| E1   | 게시판 목록 / `GET /posts?page`             | 목록 보기            | 최신순 게시글 조회                                   |
| E2   | 게시글 작성 / `POST /posts`                 | 제목/내용 작성, 등록 | 게시글 생성, 작성자 레벨(누적 km) 함께 표시(조회 시) |
| E3   | 게시글 상세 / `GET /posts/{postId}`         | 게시글 클릭          | 본문/작성자/작성자 레벨/댓글 표시                    |
| E4   | 댓글 작성 / `POST /posts/{postId}/comments` | 댓글 작성            | 댓글 저장                                            |
| E5   | 수정/삭제 / `PATCH/DELETE /posts/{postId}`  | 본인 글 수정/삭제    | 권한 체크 후 반영                                    |
| E6   | 댓글 삭제 / `DELETE /comments/{commentId}`  | 본인 댓글 삭제       | 권한 체크 후 삭제                                    |

**게시판에 “자랑”을 녹이는 최소 장치(초안)**

- 글/댓글 옆에 `닉네임 · 누적km(레벨)` 자동 표기
- (옵션) “이번 주 누적 km” 뱃지처럼 작은 라벨도 가능하지만 MVP에선 스킵

![image.png](attachment:879f5354-bd64-4038-b502-6e6fd524c019:image.png)
